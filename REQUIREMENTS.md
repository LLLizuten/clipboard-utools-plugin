# 简易剪贴板插件需求文档

## 1. 目标与范围
- 构建基于 uTools 的简易剪贴板插件，聚合近期复制内容，便于快速搜索、二次复制、固定常用片段。
- 支持文本和图片两类内容，核心聚焦本地使用，不做云同步。

## 2. 使用场景
- 通过关键字/呼出面板进入，立即展示最新剪贴记录，按回车或点击复制选中项。
- 搜索历史（关键字过滤），支持键盘上下选择、回车复制。
- 固定常用条目，置顶显示；可取消固定。
- 直接粘贴最近复制内容到当前焦点窗口（快捷动作）。

## 3. 功能需求
- **录入**：监听复制事件（文本、图片）；去重（相同内容不重复入列但更新时间）；截断超长记录（可配置 max 字数）。
- **展示**：列表按时间倒序；显示摘要（首行或缩略图）与时间戳；固定项置顶。
- **搜索**：本地模糊搜索文本内容与固定标题；高亮匹配词（可选）。
- **操作**：
  - 复制选中记录到系统剪贴板（文本/图片）；支持回车复制与双击复制。
  - 固定/取消固定。
  - 收藏/取消收藏：对任意剪贴项添加收藏标记，支持新增/修改备注，收藏列表独立页签。
  - 删除单条或清空未固定历史。
  - 快捷键：Enter 复制，Ctrl/Cmd+F 聚焦搜索框，Delete 删除，Alt+P 固定/取消，Alt+F 收藏/取消收藏，E 编辑收藏备注；左右键切换页签（全部/文本/图片/收藏），上下键切换列表选中。
- **存储**：本地持久化（utools.db / 文件）；限制历史长度（默认 200 条，可配置）；启动时加载，退出时自动保存；收藏状态与备注一并持久化。
- **状态提示**：复制/删除/错误通过 `utools.showNotification` 短提示。

## 4. 非功能与约束
- **隐私**：数据仅本地存储，不上传网络；尊重 uTools 权限模型。
- **性能**: 列表渲染需流畅，搜索在 200 条内实时返回。
- **兼容**：Windows/macOS；依赖 uTools 6+ API（`clipboard`, `db`, `shell*`）。

## 5. 技术实现建议
- **前端栈**：Vue 3 + `<script setup>`，复用现有 Vite 配置；组件划分：`ClipboardList`、`SearchBar`、`PreviewPane`、`ActionsBar`。
- **数据模型**：`{ id, type: 'text'|'image', content|imagePath|thumb, createdAt, updatedAt, pinned: boolean, favorited: boolean, favoriteNote?: string, favoritedAt?: number }`。
- **入口与路由**：保持当前 `App.vue` 路由模式；为剪贴板功能新增入口 code（如 `clipboard`）映射到新视图。
- **样式**：延续 `src/main.css` 变量；深色/浅色兼容；滚动区留出键盘导航高亮。

## 5.1 UI 方案（草案）
- **布局**：顶部搜索栏 + 右侧操作区（清空、过滤切换）；下方列表区域；侧边或内联预览区用于图片缩略或文本多行预览。
- **列表项**：显示类型图标（T/IMG）、摘要（首行文本或缩略图）、时间、状态徽标（Pinned/Fav）；Hover 显示操作按钮（复制、固定、收藏、删除），双击复制。
- **收藏视图**：在列表顶部提供“全部 / 文本 / 图片 / 收藏”页签；收藏视图按收藏时间倒序，显示备注；备注可内联编辑或弹窗编辑。
- **页签与键盘**：提供“全部 / 文本 / 图片 / 收藏”切换；左右键切换页签，上下键切换选中项；Enter 复制，Alt+P 固定，Alt+F 收藏，E 编辑备注。
- **提示**：操作反馈统一使用 `utools.showNotification`；错误用醒目颜色提示行内文案。

## 6. 验收标准
- 在 uTools 中进入插件可见历史列表，复制最新条目只需回车一次。
- 搜索能过滤文本记录且小于 200 条时无明显卡顿。
- 固定/取消固定/收藏/删除操作在 UI 与存储中保持一致，收藏备注可编辑并保存。
- 关闭再打开后历史、固定状态、收藏与备注仍存在，且不包含被删除的记录。
